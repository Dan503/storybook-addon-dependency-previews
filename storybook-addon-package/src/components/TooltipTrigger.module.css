[data-anchor-name] {
	position: relative;
	--anchor-name: attr(data-anchor-name);
}

.TriggerElem {
	display: inline-block;
	position: relative;
	anchor-name: var(--anchor-name);

	&:hover,
	&:focus-visible {
		& + .tooltip:not([data-force-closed='true']) {
			opacity: 1;
			visibility: visible;
			pointer-events: auto;
		}
	}
}

.externalLinkIcon {
	height: 1em;
	width: 1em;
	display: inline-block;
	transform: translateY(-0.1em);
}

/* Tooltip lives in the top layer and is positioned via Anchor Positioning */
.popover {
	white-space: nowrap;
	background: var(--sb-bg1, #fff);
	color: var(--sb-color-text-secondary, #5c6870);
	border: 1px solid currentColor;
	font-weight: normal;
	border-radius: 4px;
	padding: 0.25em 0.5em;
	box-shadow: 0 1px 2px rgba(0, 0, 0, 0.06);
	pointer-events: none; /* tooltips shouldn't trap the pointer */

	/* ---- Anchor positioning (no JS) ---- */
	position: absolute; /* top-layer absolute; coordinates come from anchor() */
	top: 0;
	left: 0;
	position-anchor: var(--anchor-name);
	position-area: top span-all;
	transform: translateY(-0.5em); /* gap between trigger and tooltip */

	/* ---- Fade in/out with Popover API ---- */
	opacity: 0;
	scale: 0.5;
	transition: opacity 0.3s ease, scale 0.3s ease;
}

.popover:popover-open {
	opacity: 1;
	scale: 1;
}

/* Fallback (if anchor() unsupported): keep it usable, though not perfectly placed */
@supports not (position-area: top center) {
	.popover {
		position: absolute;
		inset: unset;
		bottom: 100%;
		left: 50%;
		translate: -50% -8px; /* center X, place above with 8px gap */
		/* you could hide or choose a simple fixed position as a last resort */
	}
}
